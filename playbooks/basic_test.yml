---
# A playbook for debugging and testing

- hosts: localhost
  gather_facts: False
  collections:
    - knightsg.dkron
  vars:
    query_host: "{{ groups['dkron']|map('extract', hostvars, ['ansible_host'])|first }}"
    
  tasks:

    # - name: test cluster_info module
    #   dkron_cluster_info:
    #     endpoint: "{{ query_host }}"
    #   register: task_output

    - name: test job_info module
      dkron_job_info:
        endpoint: "{{ query_host }}"
        name: job
      register: task_output

    - name: display output
      debug:
        var: task_output